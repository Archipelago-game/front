---
description: Анализ кода в заданной доменной области с сохранением результатов в local-dev-ai/tasks. Использование /analyze-domain <домен>, <имя-таски>, <описание-фокуса>
---

Выполни анализ кода в доменной области: **{{arg}}**

**Имя задачи:** {{arg2}}

**Фокусные точки анализа:** {{arg3}}

## Что нужно сделать

1. **Определить номер задачи**
   - Проверь существующие папки в `local-dev-ai/tasks/`
   - Найди максимальный номер и увеличь его на 1
   - Используй формат с ведущими нулями (например: 0001, 0002, 0003)

2. **Исследовать доменную область**
   - Найди все файлы, относящиеся к указанной доменной области: **{{arg}}**
   - Изучи структуру данных и типы
   - Проанализируй взаимодействие компонентов
   - Найди используемые паттерны проектирования
   - Определи зависимости и связи между модулями
   - **ОСОБОЕ ВНИМАНИЕ:** При анализе обрати особое внимание на: {{arg3}}

3. **Создать структуру**
   - Создай папку `local-dev-ai/tasks/XXXX-{{arg2}}/` где XXXX - номер задачи
   - Создай файл `analyze.md` в этой папке

4. **Описать результаты анализа в файле analyze.md**

Файл должен содержать следующие секции:

### 1. Обзор доменной области
- Назначение и ответственность домена
- Границы домена (что входит, что не входит)
- Ключевые сущности и концепции

### 2. Структура данных
- Основные типы и интерфейсы
- Схемы данных
- Примеры кода с путями к файлам и номерами строк
- Взаимосвязи между типами

### 3. Архитектурные паттерны
- Используемые паттерны проектирования
- Слоистость архитектуры (presentation, business logic, data access)
- Принципы организации кода

### 4. Компоненты и модули
- Список основных файлов с описанием их ответственности
- Диаграмма зависимостей (текстовая или mermaid)
- Публичные API и точки входа

### 5. Взаимодействие с другими доменами
- Входящие зависимости (кто использует этот домен)
- Исходящие зависимости (что использует этот домен)
- Контракты и интерфейсы взаимодействия

### 6. Состояние и управление данными
- Как хранятся данные (state management, database, localStorage)
- Как данные мутируются
- Механизмы синхронизации

### 7. Обработка ошибок и граничные случаи
- Паттерны обработки ошибок
- Валидация данных
- Граничные условия

### 8. Паттерны именования и конвенции
- Соглашения об именовании файлов
- Соглашения об именовании переменных/функций/типов
- Структура импортов

### 9. Тестирование
- Существующие тесты (если есть)
- Покрытие тестами
- Подходы к тестированию

### 10. Потенциальные улучшения
- Обнаруженные проблемы или технический долг
- Предложения по рефакторингу
- Возможности для оптимизации

### 11. Анализ фокусных точек
- Детальный разбор аспектов, указанных в описании: **{{arg3}}**
- Конкретные примеры и рекомендации по указанным фокусным точкам
- Связь фокусных точек с общей архитектурой домена

## Важные указания

- **НЕ писать код** - только анализ существующего
- **НЕ писать документацию в общем смысле** - только анализ для выполнения конкретной задачи
- Все описания **на русском языке**
- Примеры кода с **точными путями к файлам и номерами строк**
- Используй форматирование markdown для удобства чтения
- Будь конкретным, избегай общих фраз
- Включай примеры кода для иллюстрации паттернов
- Используй диаграммы mermaid где это уместно

## Пример структуры файла

```markdown
# Анализ доменной области: {{arg}}

**Задача:** {{arg2}}

**Фокус анализа:** {{arg3}}

---

## 1. Обзор доменной области
...

## 2. Структура данных
...

[и так далее для всех секций]

## 11. Анализ фокусных точек
**Специальное внимание:** {{arg3}}

[Детальный анализ указанных фокусных точек]
```

После создания файла сообщи пользователю путь к созданному файлу анализа.
