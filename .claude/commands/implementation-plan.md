---
description: Планирование реализации на основе анализа. Использование /implementation-plan <номер-задачи> | <описание-задания>
---

Создай план реализации для задачи номер: **{{arg}}**

**Задание для реализации:** {{arg2}}

## Что нужно сделать

### Этап 1: Найти и изучить результаты анализа

1. **Определить путь к задаче**
   - Проверь папку `local-dev-ai/tasks/`
   - Найди папку, которая начинается с номера задачи: `{{arg}}`
   - Формат папок: `XXXX-название` (например: `0003-health`)
   - Если номер задачи передан без ведущих нулей (например `3`), найди папку `0003-*`

2. **Найти файл с анализом**
   - В найденной папке ищи файл `analyze.md`
   - Если файл не найден, сообщи пользователю об ошибке и попроси:
     - Сначала выполнить анализ командой `/analyze-domain`
     - Проверить правильность номера задачи

3. **Прочитать результаты анализа**
   - Прочитай полностью файл `analyze.md`
   - Изучи все секции анализа:
     - Структуру данных и типы
     - Архитектурные паттерны
     - Компоненты и модули
     - Взаимодействие с другими доменами
     - Паттерны именования и конвенции
     - Фокусные точки анализа

### Этап 2: Создать план реализации

На основе изученного анализа создай детальный план реализации задания: **{{arg2}}**

1. **Создай файл плана**
   - Создай файл `realisation.md` в папке задачи
   - Путь: `local-dev-ai/tasks/XXXX-название/realisation.md`

2. **Структура файла плана**

Файл должен содержать следующие секции:

```markdown
# План реализации: {{arg2}}

**Задача:** {{arg}}

**Основано на анализе:** [ссылка на analyze.md]

---

## 1. Цель и контекст

- Что именно нужно реализовать
- Почему это важно
- Как это вписывается в существующую архитектуру (на основе анализа)

## 2. Требования

### Функциональные требования
- [ ] Требование 1
- [ ] Требование 2
- [ ] Требование 3

### Технические требования
- [ ] Следовать паттернам из анализа
- [ ] Использовать существующие типы данных
- [ ] Соблюдать конвенции именования
- [ ] Не нарушать границы домена

## 3. Анализ зависимостей

### Файлы, которые нужно создать
- `путь/к/новому/файлу1.ts` - описание назначения
- `путь/к/новому/файлу2.tsx` - описание назначения

### Файлы, которые нужно изменить
- `путь/к/существующему/файлу1.ts` - что именно изменить
- `путь/к/существующему/файлу2.tsx` - что именно изменить

### Файлы, которые НЕ нужно трогать
- `путь/к/файлу3.ts` - объяснение, почему не трогаем

## 4. Типы данных

Определи или используй существующие типы на основе анализа:

\```typescript
// Новые типы, если нужны
interface NewType {
  // ...
}

// Или используй существующие типы из анализа
import { ExistingType } from 'путь/из/анализа'
\```

## 5. Пошаговый план реализации

### Шаг 1: [Название первого шага]

**Что делать:**
- Действие 1
- Действие 2

**Файл:** `путь/к/файлу.ts`

**Пример кода:**
\```typescript
// Пример кода с учетом паттернов из анализа
\```

**Важные замечания:**
- Замечание 1
- Замечание 2

---

### Шаг 2: [Название второго шага]

**Что делать:**
- Действие 1
- Действие 2

**Файл:** `путь/к/файлу.tsx`

**Пример кода:**
\```typescript
// Пример кода
\```

**Важные замечания:**
- Замечание 1

---

[Повторить для каждого шага]

## 6. Интеграционные точки

### Взаимодействие с существующими модулями
- Модуль 1: как будем взаимодействовать
- Модуль 2: какие контракты использовать

### Экспорты и импорты
\```typescript
// Что будем экспортировать
export { ... }

// Что будем импортировать и откуда
import { ... } from '...'
\```

## 7. Обработка ошибок

- Какие ошибки могут возникнуть
- Как их обрабатывать (на основе паттернов из анализа)
- Где показывать ошибки пользователю

## 8. Тестирование (если применимо)

### Что нужно протестировать
- Сценарий 1
- Сценарий 2
- Граничные случаи

### Как тестировать
- Подход к тестированию (на основе анализа существующих тестов)
- Примеры тестовых кейсов

## 9. Порядок выполнения

**ВАЖНО:** Выполнять строго в указанном порядке!

1. Шаг 1 - [краткое описание]
2. Шаг 2 - [краткое описание]
3. Шаг 3 - [краткое описание]
[...]

## 10. Чеклист готовности

После реализации проверить:
- [ ] Все файлы созданы/изменены согласно плану
- [ ] Соблюдены паттерны из анализа
- [ ] Соблюдены конвенции именования
- [ ] Типы данных корректны
- [ ] Обработка ошибок реализована
- [ ] Интеграция с существующими модулями работает
- [ ] Код проходит линтер
- [ ] [Дополнительные пункты специфичные для задачи]

## 11. Потенциальные проблемы и решения

| Проблема | Решение |
|----------|---------|
| Проблема 1 | Как решить |
| Проблема 2 | Как решить |

## 12. Примечания

- Дополнительные замечания
- Рекомендации
- Ссылки на документацию
```

### Этап 3: Наполнить план конкретикой

При создании плана:

1. **Используй информацию из анализа**
   - Примени найденные паттерны проектирования
   - Используй существующие типы данных
   - Следуй конвенциям именования
   - Учитывай границы домена и взаимодействия

2. **Будь конкретным и детальным**
   - Точные пути к файлам
   - Конкретные примеры кода
   - Четкая последовательность действий
   - Примеры с номерами строк где возможно

3. **Сделай план выполнимым**
   - Разбей на атомарные шаги
   - Каждый шаг должен быть понятен без дополнительных объяснений
   - Предусмотри обработку ошибок
   - Укажи все зависимости

4. **Учитывай задание пользователя**
   - Основная цель: **{{arg2}}**
   - Все шаги должны вести к выполнению этого задания
   - Не добавляй лишнего, что не относится к заданию

5. **Предусмотри интеграцию**
   - Как новый код интегрируется с существующим
   - Какие файлы нужно будет импортировать
   - Где и как будет использоваться результат

## Важные указания

- **НЕ писать код** - только план реализации
- **НЕ выполнять реализацию** - это задача команды `/realisation`
- Все описания **на русском языке**
- Используй форматирование markdown для удобства чтения
- Будь максимально конкретным
- Включай примеры кода в план
- Используй диаграммы mermaid если это поможет понять план

## Обработка ошибок

1. **Файл analyze.md не найден**
   - Выведи список доступных задач из `local-dev-ai/tasks/`
   - Попроси пользователя сначала выполнить `/analyze-domain`

2. **Недостаточно информации в анализе**
   - Укажи, какой информации не хватает
   - Предложи дополнить анализ

3. **Неясности в задании**
   - Используй AskUserQuestion для уточнения
   - Не придумывай требования самостоятельно

## Результат

После создания файла сообщи пользователю:
1. Путь к созданному файлу плана
2. Краткое резюме плана (количество шагов, основные файлы)
3. Что делать дальше: использовать `/realisation {{arg}}` для выполнения плана
